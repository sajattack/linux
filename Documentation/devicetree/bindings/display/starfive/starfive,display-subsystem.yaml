# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/display/starfive/starfive,display-subsystem.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Starfive JH7110 Soc Display SubSystem

maintainers:
  - Keith Zhao <keith.zhao@starfivetech.com>
  - ShengYang Chen <shengyang.chen@starfivetech.com>

description:
  This is the bindings documentation for the JH7110 Soc Display Subsystem that
  includes front-end video data capture, display controller and display
  interface. such as HDMI and MIPI.

  JH7110 display pipeline have several components as below description,
  multi display controllers and corresponding physical interfaces.
  For different display scenarios, pipe0 and pipe1 maybe binding to different
  encoder. for example,

  pipe0 binding to HDMI for primary display,
  pipe1 binding to DSI for external display.

          +------------------------------+
          |                              |
          |                              |
  +----+  |   +-------------------+      |   +-------+   +------+   +------+
  |    +----->+  dc controller 0  +--->----->+HDMICtl| ->+ PHY  +-->+PANEL0+
  |AXI |  |   +-------------------+      |   +-------+   +------+   +------+
  |    |  |                              |
  |    |  |                              |
  |    |  |                              |
  |    |  |                              |
  |APB |  |   +-------------------+         +---------+    +------+  +-------+
  |    +----->+  dc controller 1  +--->---->+ dsiTx   +--->+DPHY  +->+ PANEL1+
  |    |  |   +-------------------+         +---------+    +------+  +-------+
  +----+  |                              |
          +------------------------------+


properties:
  compatible:
    const: starfive,display-subsystem

  clocks:
    items:
      - description: Clock for display system noc bus.
      - description: Core clock for display controller.
      - description: Clock for axi bus to access ddr.
      - description: Clock for ahb bus to R/W the phy regs.

  clock-names:
    items:
      - const: noc_bus
      - const: dc_core
      - const: axi_core
      - const: ahb

  resets:
    items:
      - description: Reset for axi bus.
      - description: Reset for ahb bus.
      - description: Core reset of display controller.

  reset-names:
    items:
      - const: axi
      - const: ahb
      - const: core

  ports:
    $ref: /schemas/types.yaml#/definitions/phandle-array
    items:
      maxItems: 1
    description:
      Should contain a list of phandles pointing to display interface port
      of dc-controller devices.

required:
  - compatible
  - clocks
  - clock-names
  - resets
  - reset-names
  - ports

additionalProperties: false

examples:
  - |
    display-subsystem {
        compatible = "starfive,display-subsystem";
        ports = <&dc_out>;

        clocks = <&syscrg 60>,
               <&voutcrg 4>,
               <&voutcrg 5>,
               <&voutcrg 6>;
        clock-names = "noc_bus", "dc_core", "axi_core", "ahb";
        resets = <&voutcrg 0>, <&voutcrg 1>, <&voutcrg 2>;
        reset-names = "axi", "ahb", "core";
    };
